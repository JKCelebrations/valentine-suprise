<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Teju üíñ</title>

<style>
body{
  margin:0;height:100vh;font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  overflow:hidden;
}

/* ================= FINAL LOVE BACKGROUND ================= */
.finalBG{
  background:
    radial-gradient(circle at top, rgba(255,255,255,.25), transparent 60%),
    linear-gradient(135deg,#ff5f9e,#ffc371);
}
.finalBG::before{
  content:"";
  position:fixed;
  inset:-20%;
  background:
    radial-gradient(circle at center,
      rgba(255,255,255,.35),
      rgba(255,182,193,.2),
      transparent 65%);
  animation:auraPulse 5s ease-in-out infinite;
  z-index:0;
}
@keyframes auraPulse{
  50%{ transform:scale(1.08); }
}

/* ================= BALLOONS ================= */
.balloon{
  position:fixed;
  bottom:-60px;
  font-size:42px;
  animation:floatUp linear infinite;
  pointer-events:none;
  z-index:40;
}
@keyframes floatUp{
  to{ transform:translateY(-120vh); opacity:0; }
}

/* ================= FALLING ================= */
.fall{
  position:fixed;
  top:-40px;
  font-size:30px;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:35;
}
@keyframes fall{
  to{ transform:translateY(110vh) rotate(360deg); opacity:0; }
}

/* ================= CENTER ================= */
.center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  z-index:5;
}

/* ================= GIFT ================= */
#gift{
  font-size:160px;
  cursor:pointer;
  pointer-events:auto;
  animation:float 2s ease-in-out infinite;
}
@keyframes float{ 50%{ transform:translateY(-18px); } }

/* ================= GIFT MESSAGE ================= */
#giftMsg{
  position:fixed;
  top:15%;
  width:100%;
  text-align:center;
  font-size:32px;
  font-weight:600;
  color:#b00020;
  opacity:0;
  transition:.3s;
  z-index:6;
}
#giftMsg.show{ opacity:1 }

/* ================= CARD ================= */
#card{
  display:none;
  background:white;
  padding:45px;
  border-radius:30px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,.3);
  pointer-events:auto;
}

/* ================= BUTTONS ================= */
.btnRow{ display:flex; gap:22px; justify-content:center; position:relative }
button{
  padding:14px 36px;
  border-radius:40px;
  border:none;
  font-size:18px;
  cursor:pointer;
}
#yesBtn{
  background:linear-gradient(135deg,#ff4d6d,#ff85a1);
  color:white;
}
#noZone button{
  background:#dee2e6;
  pointer-events:none;
}
#noText{
  margin:10px;
  font-size:18px;
  color:#6c757d;
}

/* ================= FIREWORK ================= */
.firework{
  position:fixed;
  width:6px;
  height:6px;
  border-radius:50%;
  animation:explode 1.2s ease-out forwards;
  z-index:50;
}
@keyframes explode{
  to{ transform:translate(var(--x),var(--y)); opacity:0; }
}

/* ================= SLIDESHOW ================= */
#slideshow{
  display:none;
  position:fixed;
  inset:0;
  z-index:10;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}
#slideshow img{
  width:360px;
  height:520px;
  max-width:90vw;
  max-height:75vh;
  object-fit:cover;
  border-radius:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.35);
}

/* ================= FINAL PHOTO ================= */
#photoReveal{
  display:none;
  position:fixed;
  inset:0;
  background:transparent;
  z-index:20;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
#photoReveal.show{ display:flex }
#photoReveal img{
  width:340px;
  border-radius:24px;
  z-index:25;
}
</style>
</head>

<body>

<div id="giftMsg"></div>
<div class="center"><div id="gift">üéÅ</div></div>

<div class="center">
  <div id="card">
    <h1>Teju üíñ<br>Will you be my Valentine?</h1>
    <div id="noText">üòè Try clicking No‚Ä¶</div>
    <div class="btnRow">
      <button id="yesBtn">Yes üíï</button>
      <div id="noZone"><button>No üôà</button></div>
    </div>
  </div>
</div>

<div id="slideshow"><img id="slideImg"></div>

<div id="photoReveal">
  <img src="p2.jpeg">
  <h2 style="color:white; text-align:center">
    üíï Love You Tejamma üíï<br>
    Thank you for being my Valentine üíñ
  </h2>
</div>

<audio id="music"><source src="song.mp3"></audio>

<script>
/* ================= AUDIO ================= */
const music=document.getElementById("music");
const fireSounds=["fire1.mp3","fire2.mp3"];
const fireSound=new Audio();
let fallingInterval = null;


/* ================= BALLOONS ================= */
const balloons=["üéà","‚ù§Ô∏è","üíñ","üíï","üíó"];
function startBalloons(){
  return setInterval(()=>{
    const b=document.createElement("div");
    b.className="balloon";
    b.innerText=balloons[Math.floor(Math.random()*balloons.length)];
    b.style.left=Math.random()*100+"vw";
    b.style.animationDuration=(6+Math.random()*6)+"s";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),12000);
  },400);
}
startBalloons();

/* ================= FINAL FALLING ================= */
function startFinalFalling(){
  stopFalling(); // safety

  const items = ["‚ú®","üíñ","üíï","üå∏"];
  fallingInterval = setInterval(()=>{
    const e = document.createElement("div");
    e.className = "fall";
    e.innerText = items[Math.floor(Math.random()*items.length)];
    e.style.left = Math.random()*100 + "vw";
    e.style.animationDuration = "8s";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),9000);
  },700);
}

function stopFalling(){
  if (fallingInterval) {
    clearInterval(fallingInterval);
    fallingInterval = null;
  }

  // üî• REMOVE existing falling elements immediately
  document.querySelectorAll(".fall").forEach(el => el.remove());
}


/* ================= ELEMENTS ================= */
const gift=document.getElementById("gift");
const giftMsg=document.getElementById("giftMsg");
const card=document.getElementById("card");
const yesBtn=document.getElementById("yesBtn");
const noZone=document.getElementById("noZone");
const noText=document.getElementById("noText");
const slideshow=document.getElementById("slideshow");
const slideImg=document.getElementById("slideImg");
const photoReveal=document.getElementById("photoReveal");

/* ================= GIFT ESCAPE ================= */
const giftTexts=[
  "üéÅ Catch me if you can!",
  "üòú Almost!",
  "üôà Too slow!",
  "üòå Not yet!",
  "üíñ Okay okay‚Ä¶ last try!"
];
let giftCount=0;

gift.onclick=()=>{
  if(giftCount===0){
    music.currentTime=20;
    music.volume=.6;
    music.play().catch(()=>{});
  }
  if(giftCount<giftTexts.length){
    giftMsg.innerText=giftTexts[giftCount];
    giftMsg.classList.add("show");
    setTimeout(()=>giftMsg.classList.remove("show"),800);
    gift.style.position="fixed";
    gift.style.left=Math.random()*(innerWidth-160)+"px";
    gift.style.top=Math.random()*(innerHeight-160)+"px";
    giftCount++;
    return;
  }
  gift.style.display="none";
  card.style.display="block";
};

/* ================= NO ESCAPE ================= */
const noMsgs=[
  "üòè Nice try!",
  "üòâ Almost!",
  "üòú Nope!",
  "üòÇ Haha no!",
  "üíñ Just click Yes!"
];
let noToggle=true,noIdx=0;
noZone.addEventListener("pointerenter",()=>{
  noText.innerText=noMsgs[noIdx++%noMsgs.length];
  noZone.style.position="relative";
  noZone.style.top=(noToggle?-260:200)+"px";
  noToggle=!noToggle;
});

/* ================= YES ================= */
yesBtn.onclick=()=>{
  card.style.display="none";
  music.currentTime=60;
  music.volume=.7;
  music.play().catch(()=>{});
  firecrackerTheme(startSlideshow);
};

/* ================= FIRECRACKERS ================= */
function firecrackerTheme(cb){
  multiBurst();
  setTimeout(bigFinale,1200);
  setTimeout(cb,2000);
}
function multiBurst(){
  for(let i=0;i<3;i++)setTimeout(()=>burst(100,.8),i*350);
}
function bigFinale(){ burst(220,1); }

function burst(particles,vol){
  fireSound.src=fireSounds[Math.floor(Math.random()*fireSounds.length)];
  fireSound.volume=vol;
  fireSound.currentTime=0;
  fireSound.play().catch(()=>{});
  for(let i=0;i<particles;i++){
    const f=document.createElement("div");
    f.className="firework";
    f.style.left="50vw";
    f.style.top="45vh";
    f.style.background=["#ff4d6d","#ffd166","#ff85a1","#fff"][Math.floor(Math.random()*4)];
    f.style.setProperty("--x",(Math.random()*600-300)+"px");
    f.style.setProperty("--y",(Math.random()*600-300)+"px");
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1200);
  }
}

/* ================= SLIDESHOW ================= */
const images=[...Array(17)].map((_,i)=>`p${i+1}.jpeg`);
let idx=0;

function startSlideshow(){
  stopFalling();               // ‚ùå NO falling during slideshow

  idx = 0;
  slideshow.style.display = "flex";
  slideImg.src = images[0];

  const interval = setInterval(()=>{
    idx++;
    if(idx >= images.length){
      clearInterval(interval);
      slideshow.style.display = "none";
      showFinalScreen();
      return;
    }
    slideImg.src = images[idx];
  },2000);
}

/* ================= FINAL ================= */
function showFinalScreen(){
  stopFalling();               // ‚ùå ensure nothing falls
  document.body.classList.add("finalBG");
  photoReveal.classList.add("show");
  startBalloons();             // üéà balloons only
}
</script>

</body>
</html>
