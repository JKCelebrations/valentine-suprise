<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dear Teju</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{ margin:0; padding:0; box-sizing:border-box; }

body{
  height:100vh;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  background:linear-gradient(135deg,#1a0011,#2d0a1e,#0d001a);
  color:white;
}

/* ================= ANIMATED BG PARTICLES ================= */
.bgParticle{
  position:fixed;
  border-radius:50%;
  pointer-events:none;
  z-index:0;
  opacity:0;
  animation:bgFloat linear infinite;
}
@keyframes bgFloat{
  0%  { opacity:0; transform:translateY(0) scale(.5); }
  15% { opacity:.6; }
  85% { opacity:.6; }
  100%{ opacity:0; transform:translateY(-100vh) scale(1.2); }
}

/* ================= BALLOONS ================= */
.balloon{
  position:fixed;
  bottom:-60px;
  font-size:42px;
  animation:floatUp linear infinite;
  pointer-events:none;
  z-index:40;
  filter:drop-shadow(0 0 8px rgba(255,100,150,.4));
}
@keyframes floatUp{
  to{ transform:translateY(-120vh) rotate(15deg); opacity:0; }
}

/* ================= FALLING ================= */
.fall{
  position:fixed;
  top:-40px;
  font-size:30px;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:35;
}
@keyframes fall{
  to{ transform:translateY(110vh) rotate(360deg); opacity:0; }
}

/* ================= CENTER ================= */
.center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  z-index:5;
}

/* ================= GIFT ================= */
#gift{
  font-size:160px;
  cursor:pointer;
  pointer-events:auto;
  animation:giftBounce 2s ease-in-out infinite;
  filter:drop-shadow(0 0 30px rgba(255,100,150,.7));
  transition:transform .2s;
}
#gift:hover{ transform:scale(1.15); }
@keyframes giftBounce{
  0%,100%{ transform:translateY(0) rotate(-2deg); }
  50%    { transform:translateY(-22px) rotate(2deg); }
}

/* ================= GIFT HINT ================= */
#giftHint{
  position:fixed;
  bottom:18%;
  width:100%;
  text-align:center;
  font-size:20px;
  color:rgba(255,200,220,.8);
  animation:hintPulse 2s ease-in-out infinite;
  z-index:6;
  pointer-events:none;
}
@keyframes hintPulse{
  50%{ opacity:.4; }
}

/* ================= GIFT MESSAGE ================= */
#giftMsg{
  position:fixed;
  top:15%;
  width:100%;
  text-align:center;
  font-size:32px;
  font-weight:600;
  color:#ff85a1;
  text-shadow:0 0 20px rgba(255,100,150,.6);
  opacity:0;
  transition:.3s;
  z-index:6;
}
#giftMsg.show{ opacity:1; }

/* ================= CARD ================= */
#card{
  display:none;
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,.25);
  padding:50px 55px;
  border-radius:30px;
  text-align:center;
  box-shadow:
    0 20px 60px rgba(0,0,0,.4),
    0 0 80px rgba(255,100,150,.15),
    inset 0 0 30px rgba(255,255,255,.05);
  pointer-events:auto;
  animation:cardIn .6s cubic-bezier(.34,1.56,.64,1) forwards;
}
@keyframes cardIn{
  from{ transform:scale(.7) translateY(30px); opacity:0; }
  to  { transform:scale(1) translateY(0); opacity:1; }
}
#card h1{
  font-family:'Dancing Script',cursive;
  font-size:46px;
  color:#ffd6e0;
  text-shadow:0 0 30px rgba(255,100,150,.5);
  margin-bottom:10px;
  line-height:1.3;
}

/* ================= BUTTONS ================= */
.btnRow{ display:flex; gap:22px; justify-content:center; position:relative; }
button{
  padding:16px 40px;
  border-radius:50px;
  border:none;
  font-size:18px;
  font-family:'Poppins',sans-serif;
  font-weight:600;
  cursor:pointer;
  transition:all .3s;
}
#yesBtn{
  background:linear-gradient(135deg,#ff4d6d,#ff85a1);
  color:white;
  box-shadow:0 8px 25px rgba(255,77,109,.5);
  position:relative;
  overflow:hidden;
}
#yesBtn:hover{
  transform:scale(1.08);
  box-shadow:0 12px 35px rgba(255,77,109,.7);
}
#yesBtn::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:50px;
  background:linear-gradient(135deg,#ff4d6d,#ff85a1,#fff,#ff4d6d);
  background-size:300% 300%;
  animation:shimmer 3s ease-in-out infinite;
  z-index:-1;
  filter:blur(8px);
  opacity:.6;
}
@keyframes shimmer{
  0%,100%{ background-position:0% 50%; }
  50%    { background-position:100% 50%; }
}
#noZone button{
  background:rgba(255,255,255,.15);
  color:rgba(255,255,255,.6);
  pointer-events:none;
  border:1px solid rgba(255,255,255,.15);
}
#noText{
  margin:12px 0 18px;
  font-size:17px;
  color:rgba(255,200,220,.7);
}

/* ================= FIREWORK ================= */
.firework{
  position:fixed;
  width:6px;
  height:6px;
  border-radius:50%;
  animation:explode 1.4s ease-out forwards;
  z-index:50;
  box-shadow:0 0 6px currentColor;
}
@keyframes explode{
  0%  { opacity:1; }
  100%{ transform:translate(var(--x),var(--y)) scale(.3); opacity:0; }
}

/* ================= SLIDESHOW ================= */
#slideshow{
  display:none;
  position:fixed;
  inset:0;
  z-index:10;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  background:rgba(0,0,0,.3);
}
#slideshow img{
  width:450px;
  height:600px;
  max-width:88vw;
  max-height:72vh;
  object-fit:cover;
  border-radius:22px;
  box-shadow:
    0 20px 60px rgba(0,0,0,.5),
    0 0 40px rgba(255,100,150,.2);
  border:3px solid rgba(255,255,255,.15);
  transition:opacity .5s ease, transform .5s ease;
}
#slideshow img.fadeOut{
  opacity:0;
  transform:scale(.95);
}

/* ================= FINAL LOVE BACKGROUND ================= */
.finalBG{
  background:
    radial-gradient(circle at top,rgba(255,80,130,.3),transparent 60%),
    radial-gradient(circle at bottom right,rgba(255,180,100,.15),transparent 50%),
    linear-gradient(135deg,#1a0015,#2d0a1e,#0d001a);
}
.finalBG::before{
  content:"";
  position:fixed;
  inset:-20%;
  background:
    radial-gradient(circle at center,
      rgba(255,100,150,.2),
      rgba(255,182,193,.1),
      transparent 65%);
  animation:auraPulse 4s ease-in-out infinite;
  z-index:0;
}
@keyframes auraPulse{
  50%{ transform:scale(1.08); opacity:.7; }
}

/* ================= FINAL PHOTO ================= */
#photoReveal{
  display:none;
  position:fixed;
  inset:0;
  background:transparent;
  z-index:20;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:20px;
}
#photoReveal.show{
  display:flex;
  animation:fadeInUp .8s ease forwards;
}
@keyframes fadeInUp{
  from{ opacity:0; transform:translateY(30px); }
  to  { opacity:1; transform:translateY(0); }
}
#photoReveal img{
  width:340px;
  max-width:85vw;
  border-radius:24px;
  z-index:25;
  box-shadow:
    0 20px 60px rgba(0,0,0,.5),
    0 0 60px rgba(255,100,150,.25);
  border:3px solid rgba(255,255,255,.15);
}
#photoReveal h2{
  font-family:'Dancing Script',cursive;
  font-size:36px;
  color:#ffd6e0;
  text-shadow:0 0 30px rgba(255,100,150,.5);
  text-align:center;
  line-height:1.5;
}

/* ================= SCREEN FLASH ================= */
.screenFlash{
  position:fixed;
  inset:0;
  background:white;
  z-index:100;
  animation:flash .4s ease-out forwards;
  pointer-events:none;
}
@keyframes flash{
  from{ opacity:.8; }
  to  { opacity:0; }
}
</style>
</head>

<body>

<!-- Background particles (created by JS) -->

<div id="giftHint">Tap the gift!</div>
<div id="giftMsg"></div>
<div class="center"><div id="gift">üéÅ</div></div>

<div class="center">
  <div id="card">
    <h1>Teju<br>Will you be my Valentine?</h1>
    <div id="noText">Try clicking No...</div>
    <div class="btnRow">
      <button id="yesBtn">Yes</button>
      <div id="noZone"><button>No</button></div>
    </div>
  </div>
</div>

<div id="slideshow"><img id="slideImg"></div>

<div id="photoReveal">
  <img src="p19.jpeg">
  <h2>
    Love You Tejamma<br>
    Thank you for being my Valentine
  </h2>
</div>

<audio id="music"><source src="song.mp3"></audio>

<script>
/* ================= AUDIO ================= */
const music = document.getElementById("music");
const fireSounds = ["fire1.mp3","fire2.mp3"];
let fallingInterval = null;

/* ================= BACKGROUND PARTICLES ================= */
function createBgParticles(){
  const colors = ["rgba(255,100,150,.3)","rgba(255,180,220,.2)","rgba(200,100,255,.2)","rgba(255,200,150,.15)"];
  for(let i = 0; i < 25; i++){
    const p = document.createElement("div");
    p.className = "bgParticle";
    const size = 4 + Math.random()*8;
    p.style.width = size+"px";
    p.style.height = size+"px";
    p.style.left = Math.random()*100+"vw";
    p.style.bottom = "-20px";
    p.style.background = colors[Math.floor(Math.random()*colors.length)];
    p.style.animationDuration = (10+Math.random()*15)+"s";
    p.style.animationDelay = (Math.random()*15)+"s";
    document.body.appendChild(p);
  }
}
createBgParticles();

/* ================= BALLOONS ================= */
const balloonEmojis = ["üéà","‚ù§Ô∏è","üíñ","üíï","üíó"];
let balloonInterval = null;

function startBalloons(){
  if(balloonInterval) return;
  balloonInterval = setInterval(()=>{
    const b = document.createElement("div");
    b.className = "balloon";
    b.innerText = balloonEmojis[Math.floor(Math.random()*balloonEmojis.length)];
    b.style.left = Math.random()*100+"vw";
    b.style.animationDuration = (6+Math.random()*6)+"s";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),12000);
  },500);
}
startBalloons();

/* ================= FINAL FALLING ================= */
function startFinalFalling(){
  stopFalling();
  const items = ["‚ú®","üíñ","üíï","üå∏"];
  fallingInterval = setInterval(()=>{
    const e = document.createElement("div");
    e.className = "fall";
    e.innerText = items[Math.floor(Math.random()*items.length)];
    e.style.left = Math.random()*100+"vw";
    e.style.animationDuration = "8s";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),9000);
  },700);
}

function stopFalling(){
  if(fallingInterval){
    clearInterval(fallingInterval);
    fallingInterval = null;
  }
  document.querySelectorAll(".fall").forEach(el => el.remove());
}

/* ================= ELEMENTS ================= */
const gift      = document.getElementById("gift");
const giftHint  = document.getElementById("giftHint");
const giftMsg   = document.getElementById("giftMsg");
const card      = document.getElementById("card");
const yesBtn    = document.getElementById("yesBtn");
const noZone    = document.getElementById("noZone");
const noText    = document.getElementById("noText");
const slideshow = document.getElementById("slideshow");
const slideImg  = document.getElementById("slideImg");
const photoReveal = document.getElementById("photoReveal");

/* ================= GIFT ESCAPE ================= */
const giftTexts = [
  "Catch me if you can!",
  "Almost!",
  "Too slow!",
  "Not yet!",
  "Okay okay... last try!"
];
let giftCount = 0;

gift.onclick = ()=>{
  giftHint.style.display = "none";

  if(giftCount === 0){
    music.currentTime = 20;
    music.volume = .6;
    music.play().catch(()=>{});
  }
  if(giftCount < giftTexts.length){
    giftMsg.innerText = giftTexts[giftCount];
    giftMsg.classList.add("show");
    setTimeout(()=>giftMsg.classList.remove("show"),800);
    gift.style.position = "fixed";
    gift.style.left = Math.random()*(innerWidth-160)+"px";
    gift.style.top  = Math.random()*(innerHeight-160)+"px";
    giftCount++;
    return;
  }
  gift.style.display = "none";
  card.style.display = "block";
};

/* ================= NO ESCAPE ================= */
const noMsgs = [
  "Nice try!",
  "Almost!",
  "Nope!",
  "Haha no!",
  "Just click Yes!"
];
let noToggle = true, noIdx = 0;
noZone.addEventListener("pointerenter",()=>{
  noText.innerText = noMsgs[noIdx++ % noMsgs.length];
  noZone.style.position = "relative";
  noZone.style.top = (noToggle ? -260 : 200)+"px";
  noToggle = !noToggle;
});

/* ================= YES CLICK ================= */
yesBtn.onclick = ()=>{
  card.style.display = "none";

  // PAUSE music immediately
  music.pause();

  // Screen flash for dramatic effect
  const flash = document.createElement("div");
  flash.className = "screenFlash";
  document.body.appendChild(flash);
  setTimeout(()=>flash.remove(),400);

  // Play firecrackers for 2 seconds, THEN resume song
  firecrackerShow(()=>{
    // After 2 seconds of firecrackers, start the song and slideshow
    music.currentTime = 60;
    music.volume = .7;
    music.play().catch(()=>{});
    startSlideshow();
  });
};

/* ================= FIRECRACKERS ================= */
function firecrackerShow(cb){
  // Multiple bursts spread across 2 seconds
  const burstTimes = [0, 300, 600, 1000, 1400, 1700];
  burstTimes.forEach((t,i) => {
    setTimeout(()=>{
      const isFinale = (i === burstTimes.length - 1);
      const particles = isFinale ? 250 : 80 + Math.random()*60;
      const vol = isFinale ? 1 : .7 + Math.random()*.2;
      // Vary burst positions
      const cx = 30 + Math.random()*40; // 30-70% of screen width
      const cy = 25 + Math.random()*30; // 25-55% of screen height
      burst(particles, vol, cx, cy);
    }, t);
  });

  // After 2 seconds, call the callback
  setTimeout(cb, 2200);
}

function burst(particles, vol, cx, cy){
  // Play a firecracker sound for each burst
  const snd = new Audio(fireSounds[Math.floor(Math.random()*fireSounds.length)]);
  snd.volume = vol;
  snd.play().catch(()=>{});

  const colors = ["#ff4d6d","#ffd166","#ff85a1","#a855f7","#38bdf8","#fff","#fb923c"];
  for(let i = 0; i < particles; i++){
    const f = document.createElement("div");
    f.className = "firework";
    f.style.left = cx+"vw";
    f.style.top  = cy+"vh";
    const c = colors[Math.floor(Math.random()*colors.length)];
    f.style.background = c;
    f.style.color = c;
    const angle = Math.random()*Math.PI*2;
    const dist  = 80 + Math.random()*300;
    f.style.setProperty("--x", Math.cos(angle)*dist+"px");
    f.style.setProperty("--y", Math.sin(angle)*dist+"px");
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1400);
  }
}

/* ================= SLIDESHOW ================= */
const images = [...Array(22)].map((_,i)=>`p${i+1}.jpeg`);
let idx = 0;

function startSlideshow(){
  stopFalling();
  idx = 0;
  slideshow.style.display = "flex";
  slideImg.src = images[0];
  slideImg.classList.remove("fadeOut");

  const interval = setInterval(()=>{
    // Fade out current image
    slideImg.classList.add("fadeOut");

    setTimeout(()=>{
      idx++;
      if(idx >= images.length){
        clearInterval(interval);
        slideshow.style.display = "none";
        showFinalScreen();
        return;
      }
      slideImg.src = images[idx];
      slideImg.classList.remove("fadeOut");
    },500);
  },2500);
}

/* ================= FINAL ================= */
function showFinalScreen(){
  stopFalling();
  document.body.classList.add("finalBG");
  photoReveal.classList.add("show");
  startBalloons();
}
</script>

</body>
</html>
